### 00_vars.i3.config ###

set $mod Mod1
set $scripts $XDG_CONFIG_HOME/i3/scripts

set $mode_system (l)ock, (e)xit, (r)eboot, (s)hutdown

# workspaces
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8

### 10_settings.i3.config ###

new_window pixel 1
focus_follows_mouse no
focus_wrapping no
default_border pixel 2
new_float normal
font pango:DejaVu Sans Mono 8
workspace_auto_back_and_forth no
floating_modifier $mod
# title_align center
# floating_minimum_size 1000 x 1000

workspace 1 output DisplayPort-1
workspace 2 output DisplayPort-0
workspace 3 output DisplayPort-0

### 20_windows.i3.config ###

# Open specific applications in floating mode
for_window [class="Clipgrab"] floating enable
for_window [title="i3_help"] floating enable sticky enable border normal
for_window [class="Lightdm-gtk-greeter-settings"] floating enable
for_window [class="Lxappearance"] floating enable sticky enable border normal
for_window [title="MuseScore: Play Panel"] floating enable
for_window [title="About Pale Moon"] floating enable
for_window [class="Pamac-manager"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [title="Discord"] move window to workspace 3
for_window [title="Discord Updater"] floating disable
for_window [instance="floating_alacritty"] floating enable, resize set 1000 1000, focused true
for_window [title="Spotify"] resize set 900 800

# for_window [title="snake"] floating enable

# for_window [instance="float$"] floating enable
# for_window [instance="float$"] resize set 825 400 
# for_window [instance="float$"] move position center
# for_window [instance="float$"] move scratchpad

### 30_keybindings.i3.config ###

bindsym $mod+Return exec alacritty

# Window kill command
bindsym $mod+Shift+q kill

# start program launcher
bindsym $mod+d exec --no-startup-id rofi -show run -width 512

# start window switcher
bindsym $mod+q exec --no-startup-id rofi -show window -width 512

# start lpass rofi
bindsym $mod+p exec --no-startup-id $XDG_CONFIG_HOME/rofi/scripts/lpass.sh

bindsym $mod+Shift+p exec --no-startup-id $XDG_CONFIG_HOME/rofi/scripts/pwgen.sh

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# split orientation
bindsym $mod+x split h;
bindsym $mod+v split v;

# toggle fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# Open a scratchpad terminal
bindsym $mod+Shift+Return exec alacritty --class floating_alacritty

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8

# Move to workspace with focused container
bindsym $mod+Shift+1 move container to workspace $ws1; workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2; workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3; workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4; workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8; workspace $ws8

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r exec $scripts/compile_config.sh

# Set shut down, restart and locking features
bindsym $mod+0 mode "$mode_system"

mode "$mode_system" {
  bindsym l exec --no-startup-id betterlockscreen -l, mode "default"
  bindsym e exec --no-startup-id i3-msg exit, mode "default"
  # bindsym h exec --no-startup-id i3exit hibernate, mode "default"
  bindsym r exec --no-startup-id reboot, mode "default"
  bindsym s exec --no-startup-id poweroff, mode "default"

  # exit system mode: "Enter" or "Escape"
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# Resize window (you can also use the mouse for that)
bindsym $mod+r mode "resize"

mode "resize" {
  bindsym h resize shrink width 5 px or 5 ppt
  bindsym j resize grow height 5 px or 5 ppt
  bindsym k resize shrink height 5 px or 5 ppt
  bindsym l resize grow width 5 px or 5 ppt

  # exit resize mode: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# # Pulse Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 1 +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 1 -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 1 toggle

# Media player controls
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

bindsym Print --release exec scrot -s ~/%Y%m%d%H%M%S.png
bindsym Shift+Print --release exec scrot -u ~/%Y%m%d%H%M%S.png

bindsym $mod+Shift+F10 exec sh $scripts/clear_workspaces.sh
bindsym $mod+Shift+F11 exec sh $scripts/save_workspaces.sh
bindsym $mod+Shift+F12 exec sh $scripts/restore_workspaces.sh

# Float
bindsym $mod+Shift+f exec --no-startup-id $scripts/float_window.sh

### 40_bar.i3.config ###

# Basic bar configuration using the Base16 variables.
bar {
  # status_command i3status
  status_command i3status-rs ~/.config/i3/status.toml
  position top
  tray_output primary
  tray_padding 0
  font pango:DejaVu Sans Mono 8
  separator_symbol " | "

  colors {
    # background $base00
    background #282828
    separator  $base0F
    statusline $base04

    # State             Border  BG      Text
    focused_workspace   $base05 $base0D $base00
    active_workspace    $base05 $base03 $base00
    inactive_workspace  $base03 $base01 $base05
    urgent_workspace    $base08 $base08 $base00
    binding_mode        $base00 $base0A $base00
  }
}

### 50_theme.i3.config ###

## Base16 Gruvbox dark, hard
# Author: Dawid Kurek (dawikur@gmail.com), morhetz (https://github.com/morhetz/gruvbox)
#
# You can use these variables anywhere in the i3 configuration file.

set $base00 #1d2021
set $base01 #3c3836
set $base02 #504945
set $base03 #665c54
set $base04 #bdae93
set $base05 #d5c4a1
set $base06 #ebdbb2
set $base07 #fbf1c7
set $base08 #fb4934
set $base09 #fe8019
set $base0A #fabd2f
set $base0B #b8bb26
set $base0C #8ec07c
set $base0D #83a598
set $base0E #d3869b
set $base0F #d65d0e

# Basic color configuration using the Base16 variables for windows and borders.
# Property Name         Border  BG      Text    Indicator Child Border
client.focused          $base05 $base0D $base00 $base0D $base0C
client.focused_inactive $base01 $base01 $base05 $base03 $base01
client.unfocused        $base01 $base00 $base05 $base01 $base01
client.urgent           $base08 $base08 $base00 $base08 $base08
client.placeholder      $base00 $base00 $base05 $base00 $base00
client.background       $base07

### 99_startup.i3.config ###

# Autostart applications
# exec --no-startup-id clipit
# exec_always --no-startup-id $HOME/.config/polybar/launch.sh

exec bash -c "$XDG_CONFIG_HOME/i3/scripts/restore_workspaces.sh"
exec bash -c "$RC_DIR/scripts/layout.sh -w"

